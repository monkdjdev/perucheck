---
import Layout from '../layouts/Layout.astro';

const feriados = [
  { fecha: '2026-01-01', nombre: 'Año Nuevo', dia: 'Jueves' },
  { fecha: '2026-04-02', nombre: 'Jueves Santo', dia: 'Jueves' },
  { fecha: '2026-04-03', nombre: 'Viernes Santo', dia: 'Viernes' },
  { fecha: '2026-05-01', nombre: 'Día del Trabajo', dia: 'Viernes' },
  { fecha: '2026-06-07', nombre: 'Batalla de Arica y Día de la Bandera', dia: 'Domingo' },
  { fecha: '2026-06-29', nombre: 'San Pedro y San Pablo', dia: 'Lunes' },
  { fecha: '2026-07-23', nombre: 'Día de la Fuerza Aérea del Perú', dia: 'Jueves' },
  { fecha: '2026-07-28', nombre: 'Fiestas Patrias', dia: 'Martes' },
  { fecha: '2026-07-29', nombre: 'Fiestas Patrias', dia: 'Miércoles' },
  { fecha: '2026-08-06', nombre: 'Batalla de Junín', dia: 'Jueves' },
  { fecha: '2026-08-30', nombre: 'Santa Rosa de Lima', dia: 'Domingo' },
  { fecha: '2026-10-08', nombre: 'Combate de Angamos', dia: 'Jueves' },
  { fecha: '2026-11-01', nombre: 'Día de Todos los Santos', dia: 'Domingo' },
  { fecha: '2026-12-08', nombre: 'Inmaculada Concepción', dia: 'Martes' },
  { fecha: '2026-12-09', nombre: 'Batalla de Ayacucho', dia: 'Miércoles' },
  { fecha: '2026-12-25', nombre: 'Navidad', dia: 'Viernes' },
];

const meses: Record<string, string> = {
  '01': 'ENE', '02': 'FEB', '03': 'MAR', '04': 'ABR',
  '05': 'MAY', '06': 'JUN', '07': 'JUL', '08': 'AGO',
  '09': 'SET', '10': 'OCT', '11': 'NOV', '12': 'DIC',
};

const mesesLargo: Record<string, string> = {
  '01': 'Enero', '02': 'Febrero', '03': 'Marzo', '04': 'Abril',
  '05': 'Mayo', '06': 'Junio', '07': 'Julio', '08': 'Agosto',
  '09': 'Setiembre', '10': 'Octubre', '11': 'Noviembre', '12': 'Diciembre',
};

const hoy = new Date();
hoy.setHours(0, 0, 0, 0);

// Encontrar próximo feriado
const proximoFeriado = feriados.find(f => {
  const fechaFeriado = new Date(f.fecha + 'T00:00:00');
  return fechaFeriado >= hoy;
});

// Calcular días restantes para el próximo feriado
let diasRestantes = 0;
if (proximoFeriado) {
  const fechaProximo = new Date(proximoFeriado.fecha + 'T00:00:00');
  diasRestantes = Math.ceil((fechaProximo.getTime() - hoy.getTime()) / (1000 * 60 * 60 * 24));
}

// Contar feriados restantes
const feriadosRestantes = feriados.filter(f => {
  const fechaFeriado = new Date(f.fecha + 'T00:00:00');
  return fechaFeriado >= hoy;
}).length;

function getEstado(fecha: string) {
  const fechaFeriado = new Date(fecha + 'T00:00:00');
  if (fechaFeriado.getTime() === hoy.getTime()) return 'hoy';
  if (fechaFeriado < hoy) return 'pasado';
  if (proximoFeriado && fecha === proximoFeriado.fecha) return 'proximo';
  return 'futuro';
}

function getMes(fecha: string) {
  return meses[fecha.split('-')[1]];
}

function getMesLargo(fecha: string) {
  return mesesLargo[fecha.split('-')[1]];
}

function getDia(fecha: string) {
  return parseInt(fecha.split('-')[2]);
}
---

<Layout
  title="Feriados 2026 en Perú - Calendario Completo"
  description="Calendario completo de feriados 2026 en Peru. Conoce los 16 feriados nacionales, fechas, dias de la semana y fines de semana largos. Planifica tu año."
  canonical="/feriados"
>
  <!-- Header -->
  <div class="mb-6">
    <div class="flex items-center gap-3">
      <div class="w-10 h-10 rounded-xl bg-rose-50 flex items-center justify-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-rose-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
          <line x1="16" y1="2" x2="16" y2="6" />
          <line x1="8" y1="2" x2="8" y2="6" />
          <line x1="3" y1="10" x2="21" y2="10" />
        </svg>
      </div>
      <div>
        <h1 class="text-2xl font-bold">Feriados 2026 en Peru</h1>
        <p class="text-[var(--color-text-muted)] text-sm mt-0.5">
          Calendario completo con los 16 feriados nacionales del año.
        </p>
      </div>
    </div>
  </div>

  <!-- Card próximo feriado -->
  {proximoFeriado && (
    <div class="bg-gradient-to-br from-rose-50 to-pink-50 rounded-2xl border border-rose-100 p-6 mb-6">
      <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4">
        <div class="w-16 h-16 rounded-2xl bg-white border border-rose-200 flex flex-col items-center justify-center shadow-sm">
          <span class="text-[10px] font-bold text-rose-500 uppercase tracking-wider">{getMes(proximoFeriado.fecha)}</span>
          <span class="text-2xl font-extrabold text-rose-700 -mt-0.5">{getDia(proximoFeriado.fecha)}</span>
        </div>
        <div class="flex-1">
          <div class="flex items-center gap-2 mb-1">
            <span class="text-xs font-semibold text-rose-500 uppercase tracking-wider">Proximo feriado</span>
            {diasRestantes === 0 ? (
              <span class="text-xs font-bold text-white bg-rose-500 px-2 py-0.5 rounded-full">¡Hoy!</span>
            ) : (
              <span class="text-xs font-bold text-rose-600 bg-rose-100 px-2 py-0.5 rounded-full">
                {diasRestantes === 1 ? 'Mañana' : `En ${diasRestantes} dias`}
              </span>
            )}
          </div>
          <h2 class="text-xl font-bold text-rose-800">{proximoFeriado.nombre}</h2>
          <p class="text-sm text-rose-600 mt-0.5">{proximoFeriado.dia} {getDia(proximoFeriado.fecha)} de {getMesLargo(proximoFeriado.fecha)}</p>
        </div>
        <div class="text-right hidden sm:block">
          <p class="text-3xl font-extrabold text-rose-700">{feriadosRestantes}</p>
          <p class="text-xs text-rose-500">feriados restantes</p>
        </div>
      </div>
    </div>
  )}

  <!-- Grid de feriados -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-8">
    {feriados.map((feriado) => {
      const estado = getEstado(feriado.fecha);
      return (
        <div class:list={[
          'rounded-2xl border p-4 flex items-center gap-4',
          estado === 'hoy' && 'bg-rose-50 border-rose-300 shadow-md shadow-rose-100/50 ring-2 ring-rose-200',
          estado === 'proximo' && 'bg-white border-rose-200 shadow-sm',
          estado === 'pasado' && 'bg-white/60 border-[var(--color-border)] opacity-50',
          estado === 'futuro' && 'bg-white border-[var(--color-border)]',
        ]}>
          {/* Mini calendario */}
          <div class:list={[
            'w-14 h-14 rounded-xl flex flex-col items-center justify-center shrink-0',
            estado === 'hoy' && 'bg-rose-500 text-white',
            estado === 'proximo' && 'bg-rose-100 border border-rose-200',
            estado === 'pasado' && 'bg-gray-100',
            estado === 'futuro' && 'bg-rose-50 border border-rose-100',
          ]}>
            <span class:list={[
              'text-[9px] font-bold uppercase tracking-wider',
              estado === 'hoy' ? 'text-rose-200' : estado === 'pasado' ? 'text-gray-400' : 'text-rose-400',
            ]}>{getMes(feriado.fecha)}</span>
            <span class:list={[
              'text-xl font-extrabold -mt-0.5',
              estado === 'hoy' ? 'text-white' : estado === 'pasado' ? 'text-gray-500' : 'text-rose-700',
            ]}>{getDia(feriado.fecha)}</span>
          </div>

          {/* Info */}
          <div class="flex-1 min-w-0">
            <h3 class:list={[
              'font-semibold text-sm truncate',
              estado === 'pasado' ? 'text-gray-500' : 'text-[var(--color-text)]',
            ]}>{feriado.nombre}</h3>
            <p class:list={[
              'text-xs mt-0.5',
              estado === 'pasado' ? 'text-gray-400' : 'text-[var(--color-text-muted)]',
            ]}>{feriado.dia}</p>
          </div>

          {/* Badge estado */}
          {estado === 'hoy' && (
            <span class="text-[10px] font-bold text-white bg-rose-500 px-2 py-1 rounded-lg shrink-0">HOY</span>
          )}
          {estado === 'proximo' && (
            <span class="text-[10px] font-bold text-rose-600 bg-rose-100 px-2 py-1 rounded-lg shrink-0">SIGUIENTE</span>
          )}
          {estado === 'pasado' && (
            <span class="text-[10px] text-gray-400 shrink-0">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="20 6 9 17 4 12" />
              </svg>
            </span>
          )}
        </div>
      );
    })}
  </div>

  <!-- Fines de semana largos -->
  <div class="bg-white rounded-2xl border border-[var(--color-border)] p-6 mb-6 hover:shadow-sm transition-shadow">
    <div class="flex items-center gap-2 mb-4">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-rose-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M8 2v4" />
        <path d="M16 2v4" />
        <rect x="3" y="4" width="18" height="18" rx="2" />
        <path d="M3 10h18" />
        <path d="M8 14h.01" />
        <path d="M12 14h.01" />
        <path d="M16 14h.01" />
      </svg>
      <h2 class="text-lg font-bold">Fines de semana largos 2026</h2>
    </div>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
      <div class="bg-rose-50/50 rounded-xl p-4 border border-rose-100">
        <div class="flex items-center gap-2 mb-1">
          <span class="text-xs font-bold text-rose-500 bg-rose-100 px-2 py-0.5 rounded-full">4 dias</span>
        </div>
        <p class="font-semibold text-sm">Semana Santa</p>
        <p class="text-xs text-[var(--color-text-muted)]">Jue 2 - Dom 5 de Abril</p>
      </div>

      <div class="bg-rose-50/50 rounded-xl p-4 border border-rose-100">
        <div class="flex items-center gap-2 mb-1">
          <span class="text-xs font-bold text-rose-500 bg-rose-100 px-2 py-0.5 rounded-full">3 dias</span>
        </div>
        <p class="font-semibold text-sm">Día del Trabajo</p>
        <p class="text-xs text-[var(--color-text-muted)]">Vie 1 - Dom 3 de Mayo</p>
      </div>

      <div class="bg-rose-50/50 rounded-xl p-4 border border-rose-100">
        <div class="flex items-center gap-2 mb-1">
          <span class="text-xs font-bold text-rose-500 bg-rose-100 px-2 py-0.5 rounded-full">3 dias</span>
        </div>
        <p class="font-semibold text-sm">San Pedro y San Pablo</p>
        <p class="text-xs text-[var(--color-text-muted)]">Sab 27 - Lun 29 de Junio</p>
      </div>

      <div class="bg-rose-50/50 rounded-xl p-4 border border-rose-100">
        <div class="flex items-center gap-2 mb-1">
          <span class="text-xs font-bold text-rose-500 bg-rose-100 px-2 py-0.5 rounded-full">5 dias</span>
        </div>
        <p class="font-semibold text-sm">Fiestas Patrias</p>
        <p class="text-xs text-[var(--color-text-muted)]">Sab 25 - Mie 29 de Julio</p>
      </div>

      <div class="bg-rose-50/50 rounded-xl p-4 border border-rose-100">
        <div class="flex items-center gap-2 mb-1">
          <span class="text-xs font-bold text-rose-500 bg-rose-100 px-2 py-0.5 rounded-full">4 dias</span>
        </div>
        <p class="font-semibold text-sm">Batalla de Junín</p>
        <p class="text-xs text-[var(--color-text-muted)]">Jue 6 - Dom 9 de Agosto</p>
      </div>

      <div class="bg-rose-50/50 rounded-xl p-4 border border-rose-100">
        <div class="flex items-center gap-2 mb-1">
          <span class="text-xs font-bold text-rose-500 bg-rose-100 px-2 py-0.5 rounded-full">5 dias</span>
        </div>
        <p class="font-semibold text-sm">Inmaculada y Batalla de Ayacucho</p>
        <p class="text-xs text-[var(--color-text-muted)]">Mar 8 - Vie 12 de Diciembre</p>
      </div>
    </div>
  </div>

  <!-- Contenido SEO -->
  <div class="bg-white rounded-2xl border border-[var(--color-border)] p-6 hover:shadow-sm transition-shadow">
    <div class="flex items-center gap-2 mb-3">
      <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-rose-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10" />
        <line x1="12" y1="16" x2="12" y2="12" />
        <line x1="12" y1="8" x2="12.01" y2="8" />
      </svg>
      <h2 class="text-lg font-bold">Sobre los feriados en Peru</h2>
    </div>
    <div class="text-sm text-[var(--color-text-muted)] space-y-3">
      <p>
        En el Peru, los feriados nacionales estan establecidos por el Decreto Legislativo N° 713.
        Durante estas fechas, los trabajadores del sector publico y privado tienen derecho a descansar
        y recibir su remuneracion completa.
      </p>

      <h3 class="font-semibold text-[var(--color-text)] !mt-4">¿Cuantos feriados hay en 2026?</h3>
      <p>
        El año 2026 cuenta con 16 feriados nacionales. Los meses con mas feriados son julio
        y diciembre, cada uno con 3 dias festivos. Julio incluye las Fiestas Patrias (28 y 29) y el
        Dia de la Fuerza Aérea (23), mientras que diciembre tiene la Inmaculada Concepcion (8),
        la Batalla de Ayacucho (9) y Navidad (25).
      </p>

      <h3 class="font-semibold text-[var(--color-text)] !mt-4">¿Que pasa si trabajo en feriado?</h3>
      <p>
        Si un trabajador labora durante un feriado nacional, tiene derecho a recibir una triple
        remuneracion: el pago normal del dia, una sobretasa del 100%, y el descanso compensatorio
        correspondiente. Esto esta regulado por la legislacion laboral peruana.
      </p>

      <h3 class="font-semibold text-[var(--color-text)] !mt-4">Diferencia entre feriados y dias no laborables</h3>
      <p>
        Los feriados nacionales aplican a todos los trabajadores (sector publico y privado) y no
        requieren recuperacion. Los dias no laborables, en cambio, son decretados por el gobierno
        y generalmente aplican solo al sector publico, debiendo recuperarse las horas posteriormente.
      </p>
    </div>
  </div>
</Layout>
